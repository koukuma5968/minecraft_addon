{"version":3,"sources":["../../scripts/mashle_script.ts","../../scripts/items/CaneComponent.ts","../../scripts/custom/MashleCustomComponentRegistry.ts","../../scripts/items/cane/player/GeneralMagicComponent.ts","../../scripts/items/cane/player/MuscleMagicComponent.ts","../../scripts/common/MashleMagicConst.ts"],"sourcesContent":["import { world,system, Player, ItemStack} from \"@minecraft/server\";\r\nimport { initRegisterMashleCustom } from \"./custom/MashleCustomComponentRegistry\";\r\nimport { CaneList } from \"./common/MashleMagicConst\";\r\n\r\n// ワールド接続時\r\nsystem.beforeEvents.startup.subscribe(initEvent => {\r\n  initRegisterMashleCustom(initEvent);\r\n});\r\n\r\nworld.beforeEvents.playerLeave.subscribe(leaveEvent => {\r\n  leaveEvent.player.clearDynamicProperties();\r\n});\r\n\r\nworld.afterEvents.playerSpawn.subscribe(event => {\r\n});\r\n\r\nworld.afterEvents.dataDrivenEntityTrigger.subscribe(event => {\r\n});\r\n\r\nworld.afterEvents.itemReleaseUse.subscribe(event => {\r\n  const source = event.source as Player;\r\n  const itemStack = event.itemStack as ItemStack;\r\n  const useDuration = event.useDuration as number;\r\n  const type = source.getDynamicProperty(\"cane_type\") as string;\r\n  source.setDynamicProperty(\"cane_type\");\r\n\r\n  const caneClass = CaneList[type];\r\n  const caneObject = new caneClass();\r\n  caneObject.useMagic(source, itemStack, useDuration);\r\n});\r\n","import { CustomComponentParameters, ItemComponentUseEvent, ItemCustomComponent } from \"@minecraft/server\";\r\n\r\ntype CaneTypes = {\r\n  tyep: string\r\n}\r\n\r\nexport class CaneComponent implements ItemCustomComponent {\r\n\r\n  onUse (event: ItemComponentUseEvent, arg: CustomComponentParameters) {\r\n    const caneType = arg.params as CaneTypes;\r\n    event.source.setDynamicProperty(\"cane_type\", caneType.tyep);\r\n  }\r\n\r\n}\r\n","import { StartupEvent } from \"@minecraft/server\";\r\nimport { CaneComponent } from \"../items/CaneComponent\";\r\n\r\n/**\r\n * カスタムコンポーネントの登録\r\n * @param {StartupEvent} initEvent\r\n */\r\nfunction initRegisterMashleCustom(initEvent:StartupEvent) {\r\n    // 杖\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:cane_component', new CaneComponent());\r\n\r\n}\r\n\r\nexport {initRegisterMashleCustom}\r\n","import { EntityComponentTypes, EntityProjectileComponent, ItemStack, Player } from \"@minecraft/server\";\r\nimport { CaneUseComponent } from \"../CaneUseComponent\";\r\n\r\n/**\r\n * 一般魔法\r\n */\r\nexport class GeneralMagicComponent implements CaneUseComponent {\r\n\r\n    /**\r\n     * @param {Player} player\r\n     * @param {ItemStack} itemStack\r\n     */\r\n    useMagic(player: Player, itemStack: ItemStack, duration: number): void {\r\n        const bulet = player.dimension.spawnEntity(\"kurokumaft:narcom\", player.getHeadLocation());\r\n\r\n        const projectile = bulet.getComponent(EntityComponentTypes.Projectile) as EntityProjectileComponent;\r\n        projectile.owner = player;\r\n        projectile.shoot(player.getViewDirection());\r\n    }\r\n\r\n}\r\n","import { ItemStack, Player } from \"@minecraft/server\";\r\nimport { CaneUseComponent } from \"../CaneUseComponent\";\r\n\r\n/**\r\n * 筋肉魔法\r\n */\r\nexport class MuscleMagicComponent implements CaneUseComponent {\r\n\r\n    /**\r\n     * @param {Player} player\r\n     * @param {ItemStack} itemStack\r\n     */\r\n    useMagic(player: Player, itemStack: ItemStack, duration: number): void {\r\n        throw new Error(\"Method not implemented.\");\r\n    }\r\n\r\n}\r\n","import { CaneUseComponent } from \"../items/cane/CaneUseComponent\";\r\nimport { GeneralMagicComponent } from \"../items/cane/player/GeneralMagicComponent\";\r\nimport { MuscleMagicComponent } from \"../items/cane/player/MuscleMagicComponent\";\r\n\r\nexport interface UniqueMagic {\r\n    id: number,\r\n    name: string\r\n}\r\n\r\nexport const CaneList: Record<string, new () => CaneUseComponent> = {\r\n    nomal: GeneralMagicComponent,\r\n    none: MuscleMagicComponent,\r\n};\r\n\r\nexport const UniqueMagicList = Object.freeze([\r\n    { id: 0, name: 'none' },\r\n    { id: 1, name: 'changes' },\r\n    { id: 2, name: 'gravior' },\r\n    { id: 3, name: 'explom' },\r\n    { id: 4, name: 'cuffs' },\r\n]);\r\n"],"mappings":";AAAA,SAAS,OAAM,cAAgC;;;ACMxC,IAAM,gBAAN,MAAmD;AAAA,EAExD,MAAO,OAA8B,KAAgC;AACnE,UAAM,WAAW,IAAI;AACrB,UAAM,OAAO,mBAAmB,aAAa,SAAS,IAAI;AAAA,EAC5D;AAEF;;;ACNA,SAAS,yBAAyB,WAAwB;AAEtD,YAAU,sBAAsB,wBAAwB,6BAA6B,IAAI,cAAc,CAAC;AAE5G;;;ACXA,SAAS,4BAA0E;AAM5E,IAAM,wBAAN,MAAwD;AAAA;AAAA;AAAA;AAAA;AAAA,EAM3D,SAAS,QAAgB,WAAsB,UAAwB;AACnE,UAAM,QAAQ,OAAO,UAAU,YAAY,qBAAqB,OAAO,gBAAgB,CAAC;AAExF,UAAM,aAAa,MAAM,aAAa,qBAAqB,UAAU;AACrE,eAAW,QAAQ;AACnB,eAAW,MAAM,OAAO,iBAAiB,CAAC;AAAA,EAC9C;AAEJ;;;ACdO,IAAM,uBAAN,MAAuD;AAAA;AAAA;AAAA;AAAA;AAAA,EAM1D,SAAS,QAAgB,WAAsB,UAAwB;AACnE,UAAM,IAAI,MAAM,yBAAyB;AAAA,EAC7C;AAEJ;;;ACPO,IAAM,WAAuD;AAAA,EAChE,OAAO;AAAA,EACP,MAAM;AACV;AAEO,IAAM,kBAAkB,OAAO,OAAO;AAAA,EACzC,EAAE,IAAI,GAAG,MAAM,OAAO;AAAA,EACtB,EAAE,IAAI,GAAG,MAAM,UAAU;AAAA,EACzB,EAAE,IAAI,GAAG,MAAM,UAAU;AAAA,EACzB,EAAE,IAAI,GAAG,MAAM,SAAS;AAAA,EACxB,EAAE,IAAI,GAAG,MAAM,QAAQ;AAC3B,CAAC;;;ALfD,OAAO,aAAa,QAAQ,UAAU,eAAa;AACjD,2BAAyB,SAAS;AACpC,CAAC;AAED,MAAM,aAAa,YAAY,UAAU,gBAAc;AACrD,aAAW,OAAO,uBAAuB;AAC3C,CAAC;AAED,MAAM,YAAY,YAAY,UAAU,WAAS;AACjD,CAAC;AAED,MAAM,YAAY,wBAAwB,UAAU,WAAS;AAC7D,CAAC;AAED,MAAM,YAAY,eAAe,UAAU,WAAS;AAClD,QAAM,SAAS,MAAM;AACrB,QAAM,YAAY,MAAM;AACxB,QAAM,cAAc,MAAM;AAC1B,QAAM,OAAO,OAAO,mBAAmB,WAAW;AAClD,SAAO,mBAAmB,WAAW;AAErC,QAAM,YAAY,SAAS,IAAI;AAC/B,QAAM,aAAa,IAAI,UAAU;AACjC,aAAW,SAAS,QAAQ,WAAW,WAAW;AACpD,CAAC;","names":[],"file":"../scripts/mashle_script.js"}