{"version":3,"sources":["../../scripts/kimetu_script.ts","../../scripts/item/weapon/nichirintou/Nichirintou.ts","../../scripts/item/weapon/nichirintou/NichirintouTanjiro.ts","../../scripts/item/weapon/NichirintouTypes.ts","../../scripts/item/weapon/nichirintou/NichirintouGenya.ts","../../scripts/item/weapon/nichirintou/NichirintouGiyu.ts","../../scripts/item/weapon/nichirintou/NichirintouGyoumei.ts","../../scripts/item/weapon/nichirintou/NichirintouHana.ts","../../scripts/item/weapon/nichirintou/NichirintouHi.ts","../../scripts/item/weapon/nichirintou/NichirintouHono.ts","../../scripts/common/ShooterEvent.ts","../../scripts/item/weapon/nichirintou/NichirintouInosuke.ts","../../scripts/item/weapon/nichirintou/NichirintouKaminari.ts","../../scripts/item/weapon/nichirintou/NichirintouKanawo.ts","../../scripts/item/weapon/nichirintou/NichirintouKaze.ts","../../scripts/item/weapon/nichirintou/NichirintouKoi.ts","../../scripts/item/weapon/nichirintou/NichirintouKyouzyuro.ts","../../scripts/item/weapon/nichirintou/NichirintouMituri.ts","../../scripts/item/weapon/nichirintou/NichirintouMizu.ts","../../scripts/item/weapon/nichirintou/NichirintouMuitiro.ts","../../scripts/item/weapon/nichirintou/NichirintouMushi.ts","../../scripts/item/weapon/nichirintou/NichirintouObanai.ts","../../scripts/item/weapon/nichirintou/NichirintouOto.ts","../../scripts/item/weapon/nichirintou/NichirintouSanemi.ts","../../scripts/item/weapon/nichirintou/NichirintouShinobu.ts","../../scripts/item/weapon/nichirintou/NichirintouTengen.ts","../../scripts/item/weapon/nichirintou/NichirintouZenitu.ts","../../scripts/item/weapon/kekkizyutu/KekkizyutuBakketu.ts","../../scripts/item/weapon/kekkizyutu/KekkizyutuHakaisatu.ts","../../scripts/item/weapon/kekkizyutu/KekkizyutuKoushi.ts","../../scripts/item/weapon/kekkizyutu/KekkizyutuTigama.ts","../../scripts/item/weapon/kekkizyutu/KekkizyutuUltrasonic.ts","../../scripts/player/KimetuEquipmentTick.ts","../../scripts/custom/KimetuCustomComponentRegistry.ts","../../scripts/common/ItemDurabilityDamage.ts","../../scripts/common/CommonUtil.ts"],"sourcesContent":["import { world,system, EquipmentSlot, Player } from \"@minecraft/server\";\r\nimport { initRegisterKimetuCustom, initStateChangeKimetuMonitor } from \"./custom/KimetuCustomComponentRegistry\";\r\nimport { probabilisticChoice } from \"./item/weapon/nichirintou/Nichirintou\";\r\nimport { ItemDurabilityDamage } from \"./common/ItemDurabilityDamage\";\r\nimport { KokyuObject, KokyuObjects } from \"./item/weapon/NichirintouTypes\";\r\n\r\n// ワールド接続時\r\nworld.beforeEvents.worldInitialize.subscribe(initEvent => {\r\n  initRegisterKimetuCustom(initEvent);\r\n  initStateChangeKimetuMonitor(initEvent);\r\n});\r\nworld.beforeEvents.playerLeave.subscribe(leaveEvent => {\r\n  leaveEvent.player.clearDynamicProperties();\r\n});\r\n\r\nworld.afterEvents.dataDrivenEntityTrigger.subscribe(event => {\r\n  let entity = event.entity;\r\n  if (entity instanceof Player) {\r\n    if (event.eventId == \"kurokumaft:kokyu_change\") {\r\n      let nichirintou = entity.getProperty(\"kurokumaft:nichirintou_type\");\r\n      if (nichirintou != 0) {\r\n        let object = KokyuObjects.find(ob => ob.type == nichirintou) as KokyuObject;\r\n        object.change(entity);\r\n      }\r\n    }\r\n  }\r\n});\r\n\r\n// アイテム右クリックリリース後\r\nworld.afterEvents.itemReleaseUse.subscribe(event => {\r\n  let player = event.source;\r\n  let item = event.itemStack;\r\n  let duration = event.useDuration;\r\n  if (item != undefined) {\r\n    world.sendMessage(\"itemReleaseUse\");\r\n    if (player.getDynamicProperty(\"kokyu\")) {\r\n      player.setDynamicProperty(\"kokyu\", undefined);\r\n      let nichirintou = player.getProperty(\"kurokumaft:nichirintou_type\");\r\n      if (nichirintou != 0) {\r\n        let object = KokyuObjects.find(ob => ob.type == nichirintou) as KokyuObject;\r\n        object.func(item, player);\r\n      }\r\n      player.setProperty(\"kurokumaft:kokyu_use\", false);\r\n      ItemDurabilityDamage(player, item, EquipmentSlot.Mainhand);\r\n    }\r\n  }\r\n});\r\n\r\n","import { ItemCustomComponent, ItemStack, world, ItemComponentUseEvent, Player, ItemComponentCompleteUseEvent, EntityComponentTypes, EntityInventoryComponent, Container, EquipmentSlot, EntityEquippableComponent, ItemComponentTypes, ItemEnchantableComponent } from \"@minecraft/server\";\r\n\r\nconst ProbabilisticChoice = (list: any[]) => {\r\n    const totalWeight = list.reduce((p, c) => {\r\n        return { weight: p.weight + c.weight }\r\n    }).weight\r\n\r\n    return {\r\n        pick () {\r\n        const r = Math.random() * totalWeight;\r\n        let s = 0.0;\r\n        for (const l of list) {\r\n            s += l.weight\r\n            if (r < s) { return l.item }\r\n        }\r\n        }\r\n    }\r\n};\r\n\r\nconst nichirintouLists = ProbabilisticChoice([\r\n    { item: 'kurokumaft:nichirintou_mizu' , weight: 50 },\r\n    { item: 'kurokumaft:nichirintou_hono' , weight: 30 },\r\n    { item: 'kurokumaft:nichirintou_kaze' , weight: 20 },\r\n    { item: 'kurokumaft:nichirintou_hana' , weight: 20 },\r\n    { item: 'kurokumaft:nichirintou_kaminari' , weight: 15 },\r\n    { item: 'kurokumaft:nichirintou_koi' , weight: 5 },\r\n    { item: 'kurokumaft:nichirintou_mushi' , weight: 5 },\r\n    { item: 'kurokumaft:nichirintou_oto' , weight: 5 },\r\n    { item: 'kurokumaft:nichirintou_hi' , weight: 1 },\r\n]);\r\n\r\n/**\r\n * 日輪刀\r\n */\r\nexport class Nichirintou implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 日輪刀色変わり\r\n * @param {ItemStack} itemStack\r\n * @param {Player} player\r\n */\r\nexport async function probabilisticChoice(itemStack:ItemStack, player:Player) {\r\n    let nichirintou = nichirintouLists.pick();\r\n\r\n    let enchant = itemStack.getComponent(ItemComponentTypes.Enchantable) as ItemEnchantableComponent;\r\n\r\n    let changeItem = new ItemStack(nichirintou);\r\n    let newEnchant = changeItem.getComponent(ItemComponentTypes.Enchantable) as ItemEnchantableComponent;\r\n    newEnchant.addEnchantments(enchant.getEnchantments());\r\n\r\n    let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n    equ.setEquipment(EquipmentSlot.Mainhand, changeItem);\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, world, EntityEquippableComponent, EntityComponentTypes, EquipmentSlot } from \"@minecraft/server\";\r\nimport { KokyuObject, KokyuObjects } from \"../NichirintouTypes\";\r\n\r\nconst kokyu = Object.freeze([\r\n    \"msg.kurokumaft:mizu_kokyu1.name\",\r\n    \"msg.kurokumaft:mizu_kokyu2.name\",\r\n    \"msg.kurokumaft:mizu_kokyu3.name\",\r\n    \"msg.kurokumaft:mizu_kokyu4.name\",\r\n    \"msg.kurokumaft:mizu_kokyu5.name\",\r\n    \"msg.kurokumaft:mizu_kokyu6.name\",\r\n    \"msg.kurokumaft:mizu_kokyu7.name\",\r\n    \"msg.kurokumaft:mizu_kokyu8.name\",\r\n    \"msg.kurokumaft:mizu_kokyu9.name\",\r\n    \"msg.kurokumaft:mizu_kokyu10.name\",\r\n    \"msg.kurokumaft:hi_kokyu1.name\",\r\n    \"msg.kurokumaft:hi_kokyu2.name\",\r\n    \"msg.kurokumaft:hi_kokyu3.name\",\r\n    \"msg.kurokumaft:hi_kokyu4.name\",\r\n    \"msg.kurokumaft:hi_kokyu5.name\",\r\n    \"msg.kurokumaft:hi_kokyu6.name\",\r\n    \"msg.kurokumaft:hi_kokyu7.name\",\r\n    \"msg.kurokumaft:hi_kokyu8.name\",\r\n    \"msg.kurokumaft:hi_kokyu9.name\",\r\n    \"msg.kurokumaft:hi_kokyu10.name\",\r\n    \"msg.kurokumaft:hi_kokyu11.name\",\r\n    \"msg.kurokumaft:hi_kokyu12.name\"\r\n]);\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouTanjiro implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n        player.setProperty(\"kurokumaft:kokyu_use\", true);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 炭治郎 呼吸変更\r\n * @param {Player} player\r\n */\r\nexport async function changeTanjiro(player:Player) {\r\n\r\n    let kata = player.getProperty(\"kurokumaft:kokyu_kata\");\r\n    let object = KokyuObjects[1] as KokyuObject;\r\n    let index = object.kata.findIndex(num => num == kata);\r\n    if (index != -1) {\r\n        if (index < object.kata.length - 1) {\r\n            player.setProperty(\"kurokumaft:kokyu_kata\", object.kata[index + 1]);\r\n            player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"translate\\\":\\\"msg.kurokumaft:tanjiro_kata\" + object.kata[index + 1] + \".name\\\"}]}\");\r\n        } else {\r\n            player.setProperty(\"kurokumaft:kokyu_kata\", object.kata[0]);\r\n            player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"translate\\\":\\\"msg.kurokumaft:tanjiro_kata1.name\\\"}]}\");\r\n        }\r\n    }\r\n}\r\n\r\n/**\r\n * 炭治郎 呼吸\r\n * @param {ItemStack} itemStack\r\n * @param {Player} player\r\n */\r\nexport async function kokyuTanjiro(itemStack:ItemStack, player:Player) {\r\n\r\n    let kata = player.getProperty(\"kurokumaft:kokyu_kata\") as number;\r\n\r\n    switch (kata) {\r\n        case 1 :\r\n            break;\r\n        case 2 :\r\n            break;\r\n    }\r\n    world.sendMessage(kata+\"\");\r\n    player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"translate\\\":\\\"\" + kokyu[kata-1] + \"\\\"}]}\");\r\n}\r\n","import { probabilisticChoice } from \"./nichirintou/Nichirintou\"\r\nimport { changeTanjiro, kokyuTanjiro } from \"./nichirintou/NichirintouTanjiro\"\r\n\r\nexport interface KokyuObject {\r\n    itemName:string,\r\n    type:number,\r\n    kata: number[],\r\n    kata_msg: string,\r\n    change: CallableFunction,\r\n    func: CallableFunction\r\n}\r\n\r\nexport const KokyuObjects = Object.freeze([\r\n    {\r\n        itemName: \"kurokumaft:nichirintou\",\r\n        type: 1,\r\n        change: undefined,\r\n        func: probabilisticChoice\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nichirintou_tanjiro\",\r\n        type: 2,\r\n        kata: [1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22],\r\n        kata_msg: \"msg.kurokumaft:tanjiro_kata\",\r\n        change: changeTanjiro,\r\n        func: kokyuTanjiro\r\n    },\r\n    {\r\n        itemName: \"kurokumaft:nichirintou_zenitu\",\r\n        type: 2,\r\n        kata: [1,2,7],\r\n        kata_msg: \"msg.kurokumaft:tanjiro_kata\",\r\n        change: changeTanjiro,\r\n        func: kokyuTanjiro\r\n    },\r\n])\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouGenya implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouGiyu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouGyoumei implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouHana implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouHi implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, EntityComponentTypes, EntityVariantComponent } from \"@minecraft/server\";\r\nimport { shooting } from \"../../../common/ShooterEvent\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouHono implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n\r\n        let variant = player.getComponent(EntityComponentTypes.Variant) as EntityVariantComponent;\r\n\r\n        if (variant != undefined && variant.value == 5) {\r\n            shooting(player, \"kurokumaft:hono_tiger\", 0, 2, undefined);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import { EntityComponentTypes, EntityProjectileComponent, ItemStack, Player } from \"@minecraft/server\"\r\n\r\n/**\r\n * 投擲系魔法\r\n * @param {Player} player\r\n * @param {ItemStack} item\r\n * @param {string} throwItem\r\n * @param {number} ranNum\r\n */\r\nfunction throwing(player:Player, item:ItemStack, throwItem:string, ranNum:number) {\r\n\r\n    let bulet = player.dimension.spawnEntity(throwItem, player.getHeadLocation());\r\n    item.amount++;\r\n\r\n    let projectile = bulet.getComponent(EntityComponentTypes.Projectile) as EntityProjectileComponent;\r\n    projectile.owner = player;\r\n    projectile.shoot(player.getViewDirection(), {\r\n        uncertainty: ranNum\r\n    });\r\n\r\n}\r\n\r\n/**\r\n * 投射系魔法\r\n * @param {Player} player\r\n * @param {string} throwItem\r\n * @param {number} ranNum\r\n * @param {string} event\r\n */\r\nfunction shooting(player:Player, throwItem:string, ranNum:number, seepd:number, event:string | undefined) {\r\n\r\n    let bulet;\r\n\r\n    if (event != undefined) {\r\n        bulet = player.dimension.spawnEntity(throwItem+\"<\"+event+\">\", player.getHeadLocation());\r\n    } else {\r\n        bulet = player.dimension.spawnEntity(throwItem, player.getHeadLocation());\r\n    }\r\n\r\n    let projectile = bulet.getComponent(EntityComponentTypes.Projectile) as EntityProjectileComponent;\r\n    projectile.owner = player;\r\n    projectile.shoot({\r\n        x:player.getViewDirection().x * seepd,\r\n        y:player.getViewDirection().y * seepd,\r\n        z:player.getViewDirection().z * seepd\r\n    },\r\n    {\r\n        uncertainty: ranNum\r\n    });\r\n\r\n    return bulet;\r\n}\r\nexport {throwing, shooting};","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouInosuke implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouKaminari implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouKanawo implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouKaze implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouKoi implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, EntityComponentTypes, EntityVariantComponent } from \"@minecraft/server\";\r\nimport { shooting } from \"../../../common/ShooterEvent\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouKyouzyuro implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n\r\n        let variant = player.getComponent(EntityComponentTypes.Variant) as EntityVariantComponent;\r\n\r\n        if (variant && variant.value == 5) {\r\n            shooting(player, \"kurokumaft:hono_tiger\", 0, 2, undefined);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouMituri implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouMizu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouMuitiro implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouMushi implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouObanai implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouOto implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouSanemi implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouShinobu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（炭治郎）\r\n */\r\nexport class NichirintouTengen implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 日輪刀（善逸）\r\n */\r\nexport class NichirintouZenitu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n        player.setDynamicProperty(\"kokyu\", true);\r\n    }\r\n\r\n}\r\n\r\n/**\r\n * 善逸 呼吸\r\n * @param {ItemStack} itemStack\r\n * @param {Player} player\r\n */\r\nexport async function kokyuZenitu(itemStack:ItemStack, player:Player) {\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 血気術\r\n */\r\nexport class KekkizyutuBakketu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, EntityComponentTypes, EntityVariantComponent } from \"@minecraft/server\";\r\nimport { shooting } from \"../../../common/ShooterEvent\";\r\n\r\n/**\r\n * 血気術\r\n */\r\nexport class KekkizyutuHakaisatu implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        let variant = player.getComponent(EntityComponentTypes.Variant) as EntityVariantComponent;\r\n\r\n        if (variant && variant.value == 2) {\r\n            shooting(player, \"kurokumaft:kushiki\", 0, 6, undefined);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, EntityComponentTypes, EntityVariantComponent } from \"@minecraft/server\";\r\nimport { shooting } from \"../../../common/ShooterEvent\";\r\n\r\n/**\r\n * 血気術\r\n */\r\nexport class KekkizyutuKoushi implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        let variant = player.getComponent(EntityComponentTypes.Variant) as EntityVariantComponent;\r\n        if (variant && variant.value == 3) {\r\n            shooting(player, \"kurokumaft:kokushirinten\", 0, 6, undefined);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player, EntityComponentTypes, EntityVariantComponent } from \"@minecraft/server\";\r\nimport { shooting } from \"../../../common/ShooterEvent\";\r\n\r\n/**\r\n * 血気術\r\n */\r\nexport class KekkizyutuTigama implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n\r\n        let variant = player.getComponent(EntityComponentTypes.Variant) as EntityVariantComponent;\r\n        if (variant && variant.value == 1) {\r\n            shooting(player, \"kurokumaft:tobi_tigama\", 0, 4, undefined);\r\n        }\r\n\r\n    }\r\n\r\n}\r\n","import { ItemCustomComponent, ItemStack, ItemComponentUseEvent, Player } from \"@minecraft/server\";\r\n\r\n/**\r\n * 血気術\r\n */\r\nexport class KekkizyutuUltrasonic implements ItemCustomComponent {\r\n\r\n    // 右クリック\r\n    onUse(event:ItemComponentUseEvent) {\r\n        let itemStack = event.itemStack as ItemStack;\r\n        let player = event.source as Player;\r\n    }\r\n\r\n}\r\n","import { EntityComponentTypes, EntityEquippableComponent, EquipmentSlot, Player, system, world } from \"@minecraft/server\";\r\nimport { KokyuObject, KokyuObjects } from \"../item/weapon/NichirintouTypes\";\r\n\r\nasync function checkPlayerKimetuEquTick() {\r\n\r\n    let players = world.getPlayers() as Player[];\r\n\r\n    for (let i = 0; i < players.length; i++) {\r\n        let player = players[i];\r\n        if (!player.isValid()) {\r\n            continue;\r\n        }\r\n        let equ = player.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n\r\n        // 日輪刀装備状態\r\n        let mainHand = equ.getEquipment(EquipmentSlot.Mainhand);\r\n        if (mainHand != undefined) {\r\n            let object = KokyuObjects.find(ob => ob.itemName == mainHand.typeId) as KokyuObject;\r\n            // 日輪刀を持っている\r\n            if (object != undefined) {\r\n                if (player.getDynamicProperty(\"kurokumaft:nichirintou_type\") != object.type) {\r\n                    player.setDynamicProperty(\"kurokumaft:nichirintou_type\", object.type);\r\n                    if (object.kata != undefined) {\r\n                        player.setDynamicProperty(\"kurokumaft:kokyu_kata\", object.kata[0]);\r\n                        player.runCommand(\"/titleraw @s actionbar {\\\"rawtext\\\":[{\\\"translate\\\":\\\"\" + object.kata_msg + \"1.name\\\"}]}\");\r\n                    }\r\n                }\r\n            // 日輪刀を持っていない\r\n            } else {\r\n                player.setDynamicProperty(\"kurokumaft:nichirintou_type\", 0);\r\n                player.setDynamicProperty(\"kurokumaft:kokyu_kata\", 0);\r\n            }\r\n        } else {\r\n            if (player.getDynamicProperty(\"kurokumaft:nichirintou_type\") != 0) {\r\n                player.setDynamicProperty(\"kurokumaft:nichirintou_type\", 0);\r\n                player.setDynamicProperty(\"kurokumaft:kokyu_kata\", 0);\r\n            }\r\n        }\r\n    }\r\n\r\n    system.run(checkPlayerKimetuEquTick);\r\n}\r\n\r\nexport {checkPlayerKimetuEquTick}","import { WorldInitializeBeforeEvent } from \"@minecraft/server\";\r\nimport { Nichirintou } from \"../item/weapon/nichirintou/Nichirintou\";\r\nimport { NichirintouTanjiro } from \"../item/weapon/nichirintou/NichirintouTanjiro\";\r\nimport { NichirintouGenya } from \"../item/weapon/nichirintou/NichirintouGenya\";\r\nimport { NichirintouGiyu } from \"../item/weapon/nichirintou/NichirintouGiyu\";\r\nimport { NichirintouGyoumei } from \"../item/weapon/nichirintou/NichirintouGyoumei\";\r\nimport { NichirintouHana } from \"../item/weapon/nichirintou/NichirintouHana\";\r\nimport { NichirintouHi } from \"../item/weapon/nichirintou/NichirintouHi\";\r\nimport { NichirintouHono } from \"../item/weapon/nichirintou/NichirintouHono\";\r\nimport { NichirintouInosuke } from \"../item/weapon/nichirintou/NichirintouInosuke\";\r\nimport { NichirintouKaminari } from \"../item/weapon/nichirintou/NichirintouKaminari\";\r\nimport { NichirintouKanawo } from \"../item/weapon/nichirintou/NichirintouKanawo\";\r\nimport { NichirintouKaze } from \"../item/weapon/nichirintou/NichirintouKaze\";\r\nimport { NichirintouKoi } from \"../item/weapon/nichirintou/NichirintouKoi\";\r\nimport { NichirintouKyouzyuro } from \"../item/weapon/nichirintou/NichirintouKyouzyuro\";\r\nimport { NichirintouMituri } from \"../item/weapon/nichirintou/NichirintouMituri\";\r\nimport { NichirintouMizu } from \"../item/weapon/nichirintou/NichirintouMizu\";\r\nimport { NichirintouMuitiro } from \"../item/weapon/nichirintou/NichirintouMuitiro\";\r\nimport { NichirintouMushi } from \"../item/weapon/nichirintou/NichirintouMushi\";\r\nimport { NichirintouObanai } from \"../item/weapon/nichirintou/NichirintouObanai\";\r\nimport { NichirintouOto } from \"../item/weapon/nichirintou/NichirintouOto\";\r\nimport { NichirintouSanemi } from \"../item/weapon/nichirintou/NichirintouSanemi\";\r\nimport { NichirintouShinobu } from \"../item/weapon/nichirintou/NichirintouShinobu\";\r\nimport { NichirintouTengen } from \"../item/weapon/nichirintou/NichirintouTengen\";\r\nimport { NichirintouZenitu } from \"../item/weapon/nichirintou/NichirintouZenitu\";\r\nimport { KekkizyutuBakketu } from \"../item/weapon/kekkizyutu/KekkizyutuBakketu\";\r\nimport { KekkizyutuHakaisatu } from \"../item/weapon/kekkizyutu/KekkizyutuHakaisatu\";\r\nimport { KekkizyutuKoushi } from \"../item/weapon/kekkizyutu/KekkizyutuKoushi\";\r\nimport { KekkizyutuTigama } from \"../item/weapon/kekkizyutu/KekkizyutuTigama\";\r\nimport { KekkizyutuUltrasonic } from \"../item/weapon/kekkizyutu/KekkizyutuUltrasonic\";\r\nimport { checkPlayerKimetuEquTick } from \"../player/KimetuEquipmentTick\";\r\n\r\n/**\r\n * カスタムコンポーネントの登録\r\n * @param {WorldInitializeBeforeEvent} initEvent\r\n */\r\nfunction initRegisterKimetuCustom(initEvent:WorldInitializeBeforeEvent) {\r\n\r\n    // アイテム類\r\n    // 日輪刀\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou', new Nichirintou());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_tanjiro', new NichirintouTanjiro());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_zenitu', new NichirintouZenitu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_inosuke', new NichirintouInosuke());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_kanawo', new NichirintouKanawo());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_genya', new NichirintouGenya());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_giyu', new NichirintouGiyu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_shinobu', new NichirintouShinobu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_kyouzyuro', new NichirintouKyouzyuro());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_tengen', new NichirintouTengen());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_obanai', new NichirintouObanai());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_sanemi', new NichirintouSanemi());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_mituri', new NichirintouMituri());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_muitiro', new NichirintouMuitiro());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_gyoumei', new NichirintouGyoumei());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_mizu', new NichirintouMizu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_hi', new NichirintouHi());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_kaminari', new NichirintouKaminari());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_hono', new NichirintouHono());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_mushi', new NichirintouMushi());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_hana', new NichirintouHana());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_koi', new NichirintouKoi());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_oto', new NichirintouOto());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:nichirintou_kaze', new NichirintouKaze());\r\n    \r\n    // 血気術\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:kekkizyutu_bakketu', new KekkizyutuBakketu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:kekkizyutu_tigama', new KekkizyutuTigama());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:kekkizyutu_hakaisatu', new KekkizyutuHakaisatu());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:kekkizyutu_koushi', new KekkizyutuKoushi());\r\n    initEvent.itemComponentRegistry.registerCustomComponent('kurokumaft:kekkizyutu_ultrasonic', new KekkizyutuUltrasonic());\r\n\r\n    // ブロック類\r\n//    initEvent.blockComponentRegistry.registerCustomComponent('kurokumaft:torchlight_block', new TorchlightBlock());\r\n\r\n}\r\n\r\n/**\r\n * 監視スレッドの登録\r\n * @param {WorldInitializeBeforeEvent} initEvent\r\n */\r\nfunction initStateChangeKimetuMonitor(initEvent:WorldInitializeBeforeEvent) {\r\n    checkPlayerKimetuEquTick();\r\n}\r\n\r\nexport {initRegisterKimetuCustom, initStateChangeKimetuMonitor}\r\n","import { ItemStack, Player, ItemComponentTypes, ItemDurabilityComponent, Entity, EntityEquippableComponent, EntityComponentTypes, EquipmentSlot, EntityInventoryComponent, Container } from \"@minecraft/server\";\r\nimport { getRandomInRange } from \"./CommonUtil\";\r\n\r\n/**\r\n * アイテムダメージ\r\n * @param {Entity} entity\r\n * @param {ItemStack} item\r\n * @param {EquipmentSlot} slot\r\n */\r\nasync function ItemDurabilityDamage(entity:Entity, item:ItemStack, slot:EquipmentSlot) {\r\n\r\n    let equ = entity.getComponent(EntityComponentTypes.Equippable) as EntityEquippableComponent;\r\n\r\n    let durability = item.getComponent(ItemComponentTypes.Durability) as ItemDurabilityComponent;\r\n    let dChange = durability.getDamageChance(Math.ceil(getRandomInRange(0, 3)));\r\n\r\n    if ((durability.damage + dChange) >= durability.maxDurability) {\r\n        equ.setEquipment(slot, undefined);\r\n    } else {\r\n\r\n        durability.damage = durability.damage + dChange;\r\n        equ.setEquipment(slot, item);\r\n    }\r\n\r\n}\r\n\r\n\r\nexport {ItemDurabilityDamage};","import { world,Player,Entity,Vector2, Vector3, Direction, EntityQueryOptions, Block} from \"@minecraft/server\";\r\nimport { HorizonVector2 } from \"./HorizonVector2\";\r\n\r\n// デバッグ用\r\n/**\r\n * @param {Object} text\r\n */\r\nfunction print(text:Object) {\r\n    world.sendMessage(text + \"\");\r\n};\r\n\r\n// 制限\r\n/**\r\n * @param {number} min\r\n * @param {number} max\r\n */\r\nfunction clamp(value:number, min:number, max:number) {\r\n    return Math.min(Math.max(value, min), max);\r\n};\r\n\r\n// 乱数\r\n/**\r\n * @param {number} min\r\n * @param {number} max\r\n */\r\nfunction getRandomInRange(min:number, max:number) {\r\n    return Math.random() * (max - min) + min;\r\n}\r\n\r\n// サウンド再生\r\n/**\r\n * @param {Entity} entity\r\n * @param {String} sound\r\n */\r\nfunction playsound(entity:Entity, sound:String) {\r\n    let commandText =  \"playsound \" + sound + \" @s\";\r\n    entity.runCommandAsync(commandText);\r\n};\r\n\r\n/**\r\n * 視線位置\r\n * @param {Vector2} rotation\r\n * @param {Vector3} location\r\n * @param {number} point\r\n */\r\nfunction getLookPoints(rotation:Vector2, location:Vector3, point:number): Vector3 {\r\n    let piNum = 90;\r\n    let xlocation;\r\n    let ylocation;\r\n    let zlocation;\r\n\r\n    // 西～北\r\n    if (rotation.y >= -90 && rotation.y < 0) {\r\n        let yRotax = -rotation.y / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 北～東\r\n    } else if (rotation.y >= 0 && rotation.y <= 90) {\r\n\r\n        let yRotax = -rotation.y / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 西～南\r\n    } else if (rotation.y < -90 && rotation.y > -180) {\r\n\r\n        let yRotax = (rotation.y + 180) / piNum;\r\n        let yRotaz = (rotation.y + 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    // 東～南\r\n    } else if (rotation.y > 90 && rotation.y <= 180) {\r\n        let yRotax = (rotation.y - 180) / piNum;\r\n        let yRotaz = -(rotation.y - 90) / piNum;\r\n        let yRota = -(rotation.x / piNum);\r\n        // 上～正面\r\n        if (rotation.x >= -90 && rotation.x < 0) {\r\n            let xRota = (rotation.x + 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        // 正面～下\r\n        } else if (rotation.x >= 0 && rotation.x <= 90) {\r\n            let xRota = -(rotation.x - 90) / piNum;\r\n            xlocation = location.x + (yRotax * xRota) * point;\r\n            ylocation = (location.y + 1.5) + (yRota) * point;\r\n            zlocation = location.z + (yRotaz * xRota) * point;\r\n        }\r\n\r\n    }\r\n    return { x:xlocation!, y:ylocation!, z:zlocation! };\r\n}\r\n\r\n/**\r\n * 視線方向\r\n * @param {Vector2} rotation\r\n * @param {number} point\r\n * @param {number} side\r\n */\r\nfunction getLookRotaionPoints(rotation:Vector2, point:number, side:number) : HorizonVector2 {\r\n    let piNum = 90;\r\n    let rotax;\r\n    let rotaz;\r\n\r\n    // 西～北\r\n    if (rotation.y >= -90 && rotation.y < 0) {\r\n        rotax = (-rotation.y / piNum) * point + (side * ((rotation.y + 90) / piNum));\r\n        rotaz = ((rotation.y + 90) / piNum) * point + (side * (-rotation.y / piNum));\r\n    // 北～東\r\n    } else if (rotation.y >= 0 && rotation.y <= 90) {\r\n        rotax = (-rotation.y / piNum) * point + (side * (-(rotation.y + 90) / piNum));\r\n        rotaz = (-(rotation.y - 90) / piNum) * point + (side * (-rotation.y / piNum));\r\n    // 西～南\r\n    } else if (rotation.y < -90 && rotation.y > -180) {\r\n        rotax = ((rotation.y + 180) / piNum) * point + (side * ((rotation.y + 90) / piNum));\r\n        rotaz = ((rotation.y + 90) / piNum) * point + (side * ((rotation.y + 180) / piNum));\r\n    // 東～南\r\n    } else if (rotation.y > 90 && rotation.y <= 180) {\r\n        rotax = ((rotation.y - 180) / piNum) * point + (side * (-(rotation.y - 90) / piNum));\r\n        rotaz = (-(rotation.y - 90) / piNum) * point + (side * ((rotation.y - 180) / piNum));\r\n    }\r\n    return { x:rotax!, z:rotaz! };\r\n}\r\n\r\nfunction normalizeVector(v: Vector3): Vector3 {\r\n    const length = Math.sqrt(v.x * v.x + v.y * v.y + v.z * v.z);\r\n    return {\r\n        x: v.x / length,\r\n        y: v.y / length,\r\n        z: v.z / length\r\n    };\r\n}\r\n\r\nfunction getDirectionVector(thisEn: Vector3, targetEn: Vector3): Vector3 {\r\n    const direction = {\r\n        x: targetEn.x - thisEn.x,\r\n        y: targetEn.y - thisEn.y,\r\n        z: targetEn.z - thisEn.z\r\n    };\r\n    return normalizeVector(direction);\r\n}\r\n\r\nfunction addTeamsTagFilter(player:Player, filterOption:EntityQueryOptions) {\r\n\r\n    if (filterOption.excludeFamilies == undefined) {\r\n        filterOption.excludeFamilies = [\"inanimate\", \"magic\", \"arrow\"];\r\n    } else {\r\n        filterOption.excludeFamilies.push(\"inanimate\", \"magic\", \"arrow\");\r\n    }\r\n    if (!world.gameRules.pvp) {\r\n        filterOption.excludeFamilies.push(\"player\");\r\n    }\r\n\r\n    if (filterOption.excludeTypes == undefined) {\r\n        filterOption.excludeTypes = [\"item\"];\r\n    } else {\r\n        filterOption.excludeTypes.push(\"item\");\r\n    }\r\n\r\n    if (filterOption.excludeTags == undefined) {\r\n        filterOption.excludeTags = [\"main_shield_guard\", \"off_shield_guard\"];\r\n    } else {\r\n        filterOption.excludeTags.push(\"main_shield_guard\", \"off_shield_guard\");\r\n    }\r\n    let tags = player.getTags();\r\n    if (tags != undefined && tags.length > 0) {\r\n        for (let index in tags) {\r\n            if (tags[index].indexOf(\"team\") != -1) {\r\n                filterOption.excludeTags.push(tags[index]);\r\n            }\r\n        }\r\n    }\r\n\r\n};\r\n\r\n// 岩盤破壊キャンセル\r\nexport function explodeBedrock(impactBLockList:Block[]): Block[] | undefined {\r\n    try {\r\n        let filterBlockList = impactBLockList.filter(block => {\r\n            if (block.location.y >= -64) {\r\n                if (!block.matches(\"minecraft:bedrock\")) {\r\n                    return block;\r\n                }\r\n            }\r\n        });\r\n        return filterBlockList;\r\n    } catch (error) {\r\n    }\r\n\r\n}\r\n\r\nconst BlockLocationList = Object.freeze([\r\n    {\r\n        direction: Direction.Up,\r\n        location: {x:0,y:1,z:0}\r\n    },\r\n    {\r\n        direction: Direction.Down,\r\n        location: {x:0,y:-1,z:0}\r\n    },\r\n    {\r\n        direction: Direction.South,\r\n        location: {x:0,y:0,z:1}\r\n    },\r\n    {\r\n        direction: Direction.North,\r\n        location: {x:0,y:0,z:-1}\r\n    },\r\n    {\r\n        direction: Direction.East,\r\n        location: {x:1,y:0,z:0}\r\n    },\r\n    {\r\n        direction: Direction.West,\r\n        location: {x:-1,y:0,z:0}\r\n    }\r\n\r\n]);\r\n\r\nexport { print, clamp, getRandomInRange, playsound, getLookPoints, getLookRotaionPoints, getDirectionVector, addTeamsTagFilter, BlockLocationList };\r\n"],"mappings":"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","names":["world","EquipmentSlot","Player","world","world","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EntityComponentTypes","EquipmentSlot","world","world","EntityComponentTypes","EquipmentSlot","ItemComponentTypes","EntityComponentTypes","world","EntityComponentTypes","ItemComponentTypes","world","Player","EquipmentSlot"],"file":"../scripts/kimetu_script.js"}